!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@babel/runtime-corejs3/helpers/typeof"),require("core-js/modules/es.array.join.js"),require("core-js/modules/es.string.sub.js"),require("@babel/runtime-corejs3/core-js-stable/object/seal"),require("@babel/runtime-corejs3/core-js-stable/map"),require("@babel/runtime-corejs3/core-js-stable/instance/includes"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/object/values"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("@babel/runtime-corejs3/core-js-stable/json/stringify"),require("@babel/runtime-corejs3/core-js-stable/instance/sort"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/object/entries"),require("@babel/runtime-corejs3/core-js-stable/instance/filter"),require("@babel/runtime-corejs3/core-js-stable/number/is-nan"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.regexp.to-string.js")):"function"==typeof define&&define.amd?define(["exports","@babel/runtime-corejs3/helpers/typeof","core-js/modules/es.array.join.js","core-js/modules/es.string.sub.js","@babel/runtime-corejs3/core-js-stable/object/seal","@babel/runtime-corejs3/core-js-stable/map","@babel/runtime-corejs3/core-js-stable/instance/includes","@babel/runtime-corejs3/core-js-stable/array/is-array","@babel/runtime-corejs3/core-js-stable/instance/map","@babel/runtime-corejs3/core-js-stable/object/values","@babel/runtime-corejs3/core-js-stable/object/keys","@babel/runtime-corejs3/core-js-stable/instance/for-each","@babel/runtime-corejs3/core-js-stable/json/stringify","@babel/runtime-corejs3/core-js-stable/instance/sort","@babel/runtime-corejs3/core-js-stable/instance/concat","@babel/runtime-corejs3/core-js-stable/object/entries","@babel/runtime-corejs3/core-js-stable/instance/filter","@babel/runtime-corejs3/core-js-stable/number/is-nan","core-js/modules/es.number.constructor.js","core-js/modules/es.object.to-string.js","core-js/modules/es.regexp.to-string.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).rollupTsUtils={},e._typeof,null,null,e._Object$seal,e._Map,e._includesInstanceProperty,e._Array$isArray,e._mapInstanceProperty,e._Object$values,e._Object$keys,e._forEachInstanceProperty,e._JSON$stringify,e._sortInstanceProperty,e._concatInstanceProperty,e._Object$entries,e._filterInstanceProperty,e._Number$isNaN)}(this,function(e,t,n,r,i,s,o,c,u,a,l,f,h,p,d,m,g,w){"use strict";var b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},b.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var v,N,P=function(e){try{return Number(e)===e}catch(e){return!1}},y=function(e){return!!e&&e.constructor===Object},j=function(e){var t,n,r=Number(e).toString();if(o(r).call(r,"e-"))return Number(null===(t=r.split("e-"))||void 0===t?void 0:t[1]);var i=(null===(n=null==e?void 0:e.toString().split(".")[1])||void 0===n?void 0:n.length)||0;return i<=2?2:i},x=9e15,D=1e9,C="0123456789abcdef",E="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",O="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",q={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-x,maxE:x,crypto:!1},T=!0,M="[DecimalError] ",R=M+"Invalid argument: ",_=M+"Precision limit exceeded",U=M+"crypto unavailable",L="[object Decimal]",I=Math.floor,F=Math.pow,S=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,k=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,A=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Z=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,B=1e7,$=E.length-1,H=O.length-1,K={toStringTag:L};function V(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=re(n)),s+=r;(n=7-(r=(o=e[t])+"").length)&&(s+=re(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function X(e,t,n){if(e!==~~e||e<t||e>n)throw Error(R+e)}function z(e,t,n,r){var i,s,o,c;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=F(10,7-t),c=e[i]%s|0,null==r?t<3?(0==t?c=c/100|0:1==t&&(c=c/10|0),o=n<4&&99999==c||n>3&&49999==c||5e4==c||0==c):o=(n<4&&c+1==s||n>3&&c+1==s/2)&&(e[i+1]/s/100|0)==F(10,t-2)-1||(c==s/2||0==c)&&!(e[i+1]/s/100|0):t<4?(0==t?c=c/1e3|0:1==t?c=c/100|0:2==t&&(c=c/10|0),o=(r||n<4)&&9999==c||!r&&n>3&&4999==c):o=((r||n<4)&&c+1==s||!r&&n>3&&c+1==s/2)&&(e[i+1]/s/1e3|0)==F(10,t-3)-1,o}function J(e,t,n){for(var r,i,s=[0],o=0,c=e.length;o<c;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=C.indexOf(e.charAt(o++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}K.absoluteValue=K.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),G(e)},K.ceil=function(){return G(new this.constructor(this),this.e+1,2)},K.clampedTo=K.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(R+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},K.comparedTo=K.cmp=function(e){var t,n,r,i,s=this,o=s.d,c=(e=new s.constructor(e)).d,u=s.s,a=e.s;if(!o||!c)return u&&a?u!==a?u:o===c?0:!o^u<0?1:-1:NaN;if(!o[0]||!c[0])return o[0]?u:c[0]?-a:0;if(u!==a)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(t=0,n=(r=o.length)<(i=c.length)?r:i;t<n;++t)if(o[t]!==c[t])return o[t]>c[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},K.cosine=K.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?i=(1/pe(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");e.precision+=n,t=he(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,de(r,n)),r.precision=e,r.rounding=t,G(2==N||3==N?n.neg():n,e,t,!0)):new r(1):new r(NaN)},K.cubeRoot=K.cbrt=function(){var e,t,n,r,i,s,o,c,u,a,l=this,f=l.constructor;if(!l.isFinite()||l.isZero())return new f(l);for(T=!1,(s=l.s*F(l.s*l,1/3))&&Math.abs(s)!=1/0?r=new f(s.toString()):(n=V(l.d),(s=((e=l.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=F(n,1/3),e=I((e+1)/3)-(e%3==(e<0?-1:2)),(r=new f(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=l.s),o=(e=f.precision)+3;;)if(a=(u=(c=r).times(c).times(c)).plus(l),r=W(a.plus(l).times(c),a.plus(u),o+2,1),V(c.d).slice(0,o)===(n=V(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(G(r,e+1,1),t=!r.times(r).times(r).eq(l));break}if(!i&&(G(c,e+1,0),c.times(c).times(c).eq(l))){r=c;break}o+=4,i=1}return T=!0,G(r,e,f.rounding,t)},K.decimalPlaces=K.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-I(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},K.dividedBy=K.div=function(e){return W(this,new this.constructor(e))},K.dividedToIntegerBy=K.divToInt=function(e){var t=this.constructor;return G(W(this,new t(e),0,1,1),t.precision,t.rounding)},K.equals=K.eq=function(e){return 0===this.cmp(e)},K.floor=function(){return G(new this.constructor(this),this.e+1,3)},K.greaterThan=K.gt=function(e){return this.cmp(e)>0},K.greaterThanOrEqualTo=K.gte=function(e){var t=this.cmp(e);return 1==t||0===t},K.hyperbolicCosine=K.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,c=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return c;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,(i=s.d.length)<32?t=(1/pe(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=he(o,1,s.times(t),new o(1),!0);for(var u,a=e,l=new o(8);a--;)u=s.times(s),s=c.minus(u.times(l.minus(u.times(l))));return G(s,o.precision=n,o.rounding=r,!0)},K.hyperbolicSine=K.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=he(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=he(s,2,i=i.times(1/pe(5,e)),i,!0);for(var o,c=new s(5),u=new s(16),a=new s(20);e--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(a))))}return s.precision=t,s.rounding=n,G(i,t,n,!0)},K.hyperbolicTangent=K.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,W(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},K.inverseCosine=K.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,i=t.rounding;return-1!==n?0===n?e.isNeg()?te(t,r,i):new t(0):new t(NaN):e.isZero()?te(t,r+4,i).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=i,e.times(2))},K.inverseHyperbolicCosine=K.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,T=!1,n=n.times(n).minus(1).sqrt().plus(n),T=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},K.inverseHyperbolicSine=K.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,T=!1,n=n.times(n).plus(1).sqrt().plus(n),T=!0,r.precision=e,r.rounding=t,n.ln())},K.inverseHyperbolicTangent=K.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?G(new s(i),e,t,!0):(s.precision=n=r-i.e,i=W(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},K.inverseSine=K.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=te(s,n+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))},K.inverseTangent=K.atan=function(){var e,t,n,r,i,s,o,c,u,a=this,l=a.constructor,f=l.precision,h=l.rounding;if(a.isFinite()){if(a.isZero())return new l(a);if(a.abs().eq(1)&&f+4<=H)return(o=te(l,f+4,h).times(.25)).s=a.s,o}else{if(!a.s)return new l(NaN);if(f+4<=H)return(o=te(l,f+4,h).times(.5)).s=a.s,o}for(l.precision=c=f+10,l.rounding=1,e=n=Math.min(28,c/7+2|0);e;--e)a=a.div(a.times(a).plus(1).sqrt().plus(1));for(T=!1,t=Math.ceil(c/7),r=1,u=a.times(a),o=new l(a),i=a;-1!==e;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),void 0!==(o=s.plus(i.div(r+=2))).d[t])for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),T=!0,G(o,l.precision=f,l.rounding=h,!0)},K.isFinite=function(){return!!this.d},K.isInteger=K.isInt=function(){return!!this.d&&I(this.e/7)>this.d.length-2},K.isNaN=function(){return!this.s},K.isNegative=K.isNeg=function(){return this.s<0},K.isPositive=K.isPos=function(){return this.s>0},K.isZero=function(){return!!this.d&&0===this.d[0]},K.lessThan=K.lt=function(e){return this.cmp(e)<0},K.lessThanOrEqualTo=K.lte=function(e){return this.cmp(e)<1},K.logarithm=K.log=function(e){var t,n,r,i,s,o,c,u,a=this,l=a.constructor,f=l.precision,h=l.rounding;if(null==e)e=new l(10),t=!0;else{if(n=(e=new l(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=a.d,a.s<0||!n||!n[0]||a.eq(1))return new l(n&&!n[0]?-1/0:1!=a.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10==0;)i/=10;s=1!==i}if(T=!1,o=ue(a,c=f+5),r=t?ee(l,c+10):ue(e,c),z((u=W(o,r,c,1)).d,i=f,h))do{if(o=ue(a,c+=10),r=t?ee(l,c+10):ue(e,c),u=W(o,r,c,1),!s){+V(u.d).slice(i+1,i+15)+1==1e14&&(u=G(u,f+1,0));break}}while(z(u.d,i+=10,h));return T=!0,G(u,f,h)},K.minus=K.sub=function(e){var t,n,r,i,s,o,c,u,a,l,f,h,p=this,d=p.constructor;if(e=new d(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new d(e.d||p.s!==e.s?p:NaN):e=new d(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(a=p.d,h=e.d,c=d.precision,u=d.rounding,!a[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!a[0])return new d(3===u?-0:0);e=new d(p)}return T?G(e,c,u):e}if(n=I(e.e/7),l=I(p.e/7),a=a.slice(),s=l-n){for((f=s<0)?(t=a,s=-s,o=h.length):(t=h,n=l,o=a.length),s>(r=Math.max(Math.ceil(c/7),o)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((f=(r=a.length)<(o=h.length))&&(o=r),r=0;r<o;r++)if(a[r]!=h[r]){f=a[r]<h[r];break}s=0}for(f&&(t=a,a=h,h=t,e.s=-e.s),o=a.length,r=h.length-o;r>0;--r)a[o++]=0;for(r=h.length;r>s;){if(a[--r]<h[r]){for(i=r;i&&0===a[--i];)a[i]=B-1;--a[i],a[r]+=B}a[r]-=h[r]}for(;0===a[--o];)a.pop();for(;0===a[0];a.shift())--n;return a[0]?(e.d=a,e.e=Y(a,n),T?G(e,c,u):e):new d(3===u?-0:0)},K.modulo=K.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?G(new r(n),r.precision,r.rounding):(T=!1,9==r.modulo?(t=W(n,e.abs(),0,3,1)).s*=e.s:t=W(n,e,0,r.modulo,1),t=t.times(e),T=!0,n.minus(t))},K.naturalExponential=K.exp=function(){return ce(this)},K.naturalLogarithm=K.ln=function(){return ue(this)},K.negated=K.neg=function(){var e=new this.constructor(this);return e.s=-e.s,G(e)},K.plus=K.add=function(e){var t,n,r,i,s,o,c,u,a,l,f=this,h=f.constructor;if(e=new h(e),!f.d||!e.d)return f.s&&e.s?f.d||(e=new h(e.d||f.s===e.s?f:NaN)):e=new h(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(a=f.d,l=e.d,c=h.precision,u=h.rounding,!a[0]||!l[0])return l[0]||(e=new h(f)),T?G(e,c,u):e;if(s=I(f.e/7),r=I(e.e/7),a=a.slice(),i=s-r){for(i<0?(n=a,i=-i,o=l.length):(n=l,r=s,o=a.length),i>(o=(s=Math.ceil(c/7))>o?s+1:o+1)&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((o=a.length)-(i=l.length)<0&&(i=o,n=l,l=a,a=n),t=0;i;)t=(a[--i]=a[i]+l[i]+t)/B|0,a[i]%=B;for(t&&(a.unshift(t),++r),o=a.length;0==a[--o];)a.pop();return e.d=a,e.e=Y(a,r),T?G(e,c,u):e},K.precision=K.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(R+e);return n.d?(t=ne(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},K.round=function(){var e=this,t=e.constructor;return G(new t(e),e.e+1,t.rounding)},K.sine=K.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:he(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/pe(5,n)),t=he(e,2,t,t);for(var i,s=new e(5),o=new e(16),c=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(c))));return t}(r,de(r,n)),r.precision=e,r.rounding=t,G(N>2?n.neg():n,e,t,!0)):new r(NaN)},K.squareRoot=K.sqrt=function(){var e,t,n,r,i,s,o=this,c=o.d,u=o.e,a=o.s,l=o.constructor;if(1!==a||!c||!c[0])return new l(!a||a<0&&(!c||c[0])?NaN:c?o:1/0);for(T=!1,0==(a=Math.sqrt(+o))||a==1/0?(((t=V(c)).length+u)%2==0&&(t+="0"),a=Math.sqrt(t),u=I((u+1)/2)-(u<0||u%2),r=new l(t=a==1/0?"5e"+u:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new l(a.toString()),n=(u=l.precision)+3;;)if(r=(s=r).plus(W(o,s,n+2,1)).times(.5),V(s.d).slice(0,n)===(t=V(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(G(r,u+1,1),e=!r.times(r).eq(o));break}if(!i&&(G(s,u+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}return T=!0,G(r,u,l.rounding,e)},K.tangent=K.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=W(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,G(2==N||4==N?n.neg():n,e,t,!0)):new r(NaN)},K.times=K.mul=function(e){var t,n,r,i,s,o,c,u,a,l=this,f=l.constructor,h=l.d,p=(e=new f(e)).d;if(e.s*=l.s,!(h&&h[0]&&p&&p[0]))return new f(!e.s||h&&!h[0]&&!p||p&&!p[0]&&!h?NaN:h&&p?0*e.s:e.s/0);for(n=I(l.e/7)+I(e.e/7),(u=h.length)<(a=p.length)&&(s=h,h=p,p=s,o=u,u=a,a=o),s=[],r=o=u+a;r--;)s.push(0);for(r=a;--r>=0;){for(t=0,i=u+r;i>r;)c=s[i]+p[r]*h[i-r-1]+t,s[i--]=c%B|0,t=c/B|0;s[i]=(s[i]+t)%B|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=Y(s,n),T?G(e,f.precision,f.rounding):e},K.toBinary=function(e,t){return me(this,2,e,t)},K.toDecimalPlaces=K.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(X(e,0,D),void 0===t?t=r.rounding:X(t,0,8),G(n,e+n.e+1,t))},K.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=Q(r,!0):(X(e,0,D),void 0===t?t=i.rounding:X(t,0,8),n=Q(r=G(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},K.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=Q(i):(X(e,0,D),void 0===t?t=s.rounding:X(t,0,8),n=Q(r=G(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},K.toFraction=function(e){var t,n,r,i,s,o,c,u,a,l,f,h,p=this,d=p.d,m=p.constructor;if(!d)return new m(p);if(a=n=new m(1),r=u=new m(0),o=(s=(t=new m(r)).e=ne(d)-p.e-1)%7,t.d[0]=F(10,o<0?7+o:o),null==e)e=s>0?t:a;else{if(!(c=new m(e)).isInt()||c.lt(a))throw Error(R+c);e=c.gt(t)?s>0?t:a:c}for(T=!1,c=new m(V(d)),l=m.precision,m.precision=s=7*d.length*2;f=W(c,t,0,1,1),1!=(i=n.plus(f.times(r))).cmp(e);)n=r,r=i,i=a,a=u.plus(f.times(i)),u=i,i=t,t=c.minus(f.times(i)),c=i;return i=W(e.minus(n),r,0,1,1),u=u.plus(i.times(a)),n=n.plus(i.times(r)),u.s=a.s=p.s,h=W(a,r,s,1).minus(p).abs().cmp(W(u,n,s,1).minus(p).abs())<1?[a,r]:[u,n],m.precision=l,T=!0,h},K.toHexadecimal=K.toHex=function(e,t){return me(this,16,e,t)},K.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:X(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(T=!1,n=W(n,e,0,t,1).times(e),T=!0,G(n)):(e.s=n.s,n=e),n},K.toNumber=function(){return+this},K.toOctal=function(e,t){return me(this,8,e,t)},K.toPower=K.pow=function(e){var t,n,r,i,s,o,c=this,u=c.constructor,a=+(e=new u(e));if(!(c.d&&e.d&&c.d[0]&&e.d[0]))return new u(F(+c,a));if((c=new u(c)).eq(1))return c;if(r=u.precision,s=u.rounding,e.eq(1))return G(c,r,s);if((t=I(e.e/7))>=e.d.length-1&&(n=a<0?-a:a)<=9007199254740991)return i=ie(u,c,n,r),e.s<0?new u(1).div(i):G(i,r,s);if((o=c.s)<0){if(t<e.d.length-1)return new u(NaN);if(1&e.d[t]||(o=1),0==c.e&&1==c.d[0]&&1==c.d.length)return c.s=o,c}return(t=0!=(n=F(+c,a))&&isFinite(n)?new u(n+"").e:I(a*(Math.log("0."+V(c.d))/Math.LN10+c.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(T=!1,u.rounding=c.s=1,n=Math.min(12,(t+"").length),(i=ce(e.times(ue(c,r+n)),r)).d&&z((i=G(i,r+5,1)).d,r,s)&&(t=r+10,+V((i=G(ce(e.times(ue(c,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=G(i,r+1,0))),i.s=o,T=!0,u.rounding=s,G(i,r,s))},K.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=Q(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(X(e,1,D),void 0===t?t=i.rounding:X(t,0,8),n=Q(r=G(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},K.toSignificantDigits=K.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(X(e,1,D),void 0===t?t=n.rounding:X(t,0,8)),G(new n(this),e,t)},K.toString=function(){var e=this,t=e.constructor,n=Q(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},K.truncated=K.trunc=function(){return G(new this.constructor(this),this.e+1,1)},K.valueOf=K.toJSON=function(){var e=this,t=e.constructor,n=Q(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var W=function(){function e(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+i,e[s]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,s,o,c,u){var a,l,f,h,p,d,m,g,w,b,N,P,y,j,x,D,C,E,O,q,T=r.constructor,M=r.s==i.s?1:-1,R=r.d,_=i.d;if(!(R&&R[0]&&_&&_[0]))return new T(r.s&&i.s&&(R?!_||R[0]!=_[0]:_)?R&&0==R[0]||!_?0*M:M/0:NaN);for(u?(p=1,l=r.e-i.e):(u=B,p=7,l=I(r.e/p)-I(i.e/p)),O=_.length,C=R.length,b=(w=new T(M)).d=[],f=0;_[f]==(R[f]||0);f++);if(_[f]>(R[f]||0)&&l--,null==s?(j=s=T.precision,o=T.rounding):j=c?s+(r.e-i.e)+1:s,j<0)b.push(1),d=!0;else{if(j=j/p+2|0,f=0,1==O){for(h=0,_=_[0],j++;(f<C||h)&&j--;f++)x=h*u+(R[f]||0),b[f]=x/_|0,h=x%_|0;d=h||f<C}else{for((h=u/(_[0]+1)|0)>1&&(_=e(_,h,u),R=e(R,h,u),O=_.length,C=R.length),D=O,P=(N=R.slice(0,O)).length;P<O;)N[P++]=0;(q=_.slice()).unshift(0),E=_[0],_[1]>=u/2&&++E;do{h=0,(a=t(_,N,O,P))<0?(y=N[0],O!=P&&(y=y*u+(N[1]||0)),(h=y/E|0)>1?(h>=u&&(h=u-1),1==(a=t(m=e(_,h,u),N,g=m.length,P=N.length))&&(h--,n(m,O<g?q:_,g,u))):(0==h&&(a=h=1),m=_.slice()),(g=m.length)<P&&m.unshift(0),n(N,m,P,u),-1==a&&(a=t(_,N,O,P=N.length))<1&&(h++,n(N,O<P?q:_,P,u)),P=N.length):0===a&&(h++,N=[0]),b[f++]=h,a&&N[0]?N[P++]=R[D]||0:(N=[R[D]],P=1)}while((D++<C||void 0!==N[0])&&j--);d=void 0!==N[0]}b[0]||b.shift()}if(1==p)w.e=l,v=d;else{for(f=1,h=b[0];h>=10;h/=10)f++;w.e=f+l*p-1,G(w,c?s+w.e+1:s,o,d)}return w}}();function G(e,t,n,r){var i,s,o,c,u,a,l,f,h,p=e.constructor;e:if(null!=t){if(!(f=e.d))return e;for(i=1,c=f[0];c>=10;c/=10)i++;if((s=t-i)<0)s+=7,o=t,u=(l=f[h=0])/F(10,i-o-1)%10|0;else if((h=Math.ceil((s+1)/7))>=(c=f.length)){if(!r)break e;for(;c++<=h;)f.push(0);l=u=0,i=1,o=(s%=7)-7+1}else{for(l=c=f[h],i=1;c>=10;c/=10)i++;u=(o=(s%=7)-7+i)<0?0:l/F(10,i-o-1)%10|0}if(r=r||t<0||void 0!==f[h+1]||(o<0?l:l%F(10,i-o-1)),a=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(s>0?o>0?l/F(10,i-o):0:f[h-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,a?(t-=e.e+1,f[0]=F(10,(7-t%7)%7),e.e=-t||0):f[0]=e.e=0,e;if(0==s?(f.length=h,c=1,h--):(f.length=h+1,c=F(10,7-s),f[h]=o>0?(l/F(10,i-o)%F(10,o)|0)*c:0),a)for(;;){if(0==h){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=c,c=1;o>=10;o/=10)c++;s!=c&&(e.e++,f[0]==B&&(f[0]=1));break}if(f[h]+=c,f[h]!=B)break;f[h--]=0,c=1}for(s=f.length;0===f[--s];)f.pop()}return T&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function Q(e,t,n){if(!e.isFinite())return ae(e);var r,i=e.e,s=V(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+re(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+re(-i-1)+s,n&&(r=n-o)>0&&(s+=re(r))):i>=o?(s+=re(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+re(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=re(r))),s}function Y(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function ee(e,t,n){if(t>$)throw T=!0,n&&(e.precision=n),Error(_);return G(new e(E),t,1,!0)}function te(e,t,n){if(t>H)throw Error(_);return G(new e(O),t,n,!0)}function ne(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function re(e){for(var t="";e--;)t+="0";return t}function ie(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/7+4);for(T=!1;;){if(n%2&&ge((s=s.times(t)).d,o)&&(i=!0),0===(n=I(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}ge((t=t.times(t)).d,o)}return T=!0,s}function se(e){return 1&e.d[e.d.length-1]}function oe(e,t,n){for(var r,i,s=new e(t[0]),o=0;++o<t.length;){if(!(i=new e(t[o])).s){s=i;break}((r=s.cmp(i))===n||0===r&&s.s===n)&&(s=i)}return s}function ce(e,t){var n,r,i,s,o,c,u,a=0,l=0,f=0,h=e.constructor,p=h.rounding,d=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(T=!1,u=d):u=t,c=new h(.03125);e.e>-2;)e=e.times(c),f+=5;for(u+=r=Math.log(F(2,f))/Math.LN10*2+5|0,n=s=o=new h(1),h.precision=u;;){if(s=G(s.times(e),u,1),n=n.times(++l),V((c=o.plus(W(s,n,u,1))).d).slice(0,u)===V(o.d).slice(0,u)){for(i=f;i--;)o=G(o.times(o),u,1);if(null!=t)return h.precision=d,o;if(!(a<3&&z(o.d,u-r,p,a)))return G(o,h.precision=d,p,T=!0);h.precision=u+=10,n=s=c=new h(1),l=0,a++}o=c}}function ue(e,t){var n,r,i,s,o,c,u,a,l,f,h,p=1,d=e,m=d.d,g=d.constructor,w=g.rounding,b=g.precision;if(d.s<0||!m||!m[0]||!d.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=d.s?NaN:m?0:d);if(null==t?(T=!1,l=b):l=t,g.precision=l+=10,r=(n=V(m)).charAt(0),!(Math.abs(s=d.e)<15e14))return a=ee(g,l+2,b).times(s+""),d=ue(new g(r+"."+n.slice(1)),l-10).plus(a),g.precision=b,null==t?G(d,b,w,T=!0):d;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=V((d=d.times(e)).d)).charAt(0),p++;for(s=d.e,r>1?(d=new g("0."+n),s++):d=new g(r+"."+n.slice(1)),f=d,u=o=d=W(d.minus(1),d.plus(1),l,1),h=G(d.times(d),l,1),i=3;;){if(o=G(o.times(h),l,1),V((a=u.plus(W(o,new g(i),l,1))).d).slice(0,l)===V(u.d).slice(0,l)){if(u=u.times(2),0!==s&&(u=u.plus(ee(g,l+2,b).times(s+""))),u=W(u,new g(p),l,1),null!=t)return g.precision=b,u;if(!z(u.d,l-10,w,c))return G(u,g.precision=b,w,T=!0);g.precision=l+=10,a=o=d=W(f.minus(1),f.plus(1),l,1),h=G(d.times(d),l,1),i=c=1}u=a,i+=2}}function ae(e){return String(e.s*e.s/0)}function le(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),T&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function fe(e,t){var n,r,i,s,o,c,u,a,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Z.test(t))return le(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(k.test(t))n=16,t=t.toLowerCase();else if(S.test(t))n=2;else{if(!A.test(t))throw Error(R+t);n=8}for((s=t.search(/p/i))>0?(u=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),o=(s=t.indexOf("."))>=0,r=e.constructor,o&&(s=(c=(t=t.replace(".","")).length)-s,i=ie(r,new r(n),s,2*s)),s=l=(a=J(t,n,B)).length-1;0===a[s];--s)a.pop();return s<0?new r(0*e.s):(e.e=Y(a,l),e.d=a,T=!1,o&&(e=W(e,i,4*c)),u&&(e=e.times(Math.abs(u)<54?F(2,u):rt.pow(2,u))),T=!0,e)}function he(e,t,n,r,i){var s,o,c,u,a=e.precision,l=Math.ceil(a/7);for(T=!1,u=n.times(n),c=new e(r);;){if(o=W(c.times(u),new e(t++*t++),a,1),c=i?r.plus(o):r.minus(o),r=W(o.times(u),new e(t++*t++),a,1),void 0!==(o=c.plus(r)).d[l]){for(s=l;o.d[s]===c.d[s]&&s--;);if(-1==s)break}s=c,c=r,r=o,o=s}return T=!0,o.d.length=l+1,o}function pe(e,t){for(var n=e;--t;)n*=e;return n}function de(e,t){var n,r=t.s<0,i=te(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return N=r?4:1,t;if((n=t.divToInt(i)).isZero())N=r?3:2;else{if((t=t.minus(n.times(i))).lte(s))return N=se(n)?r?2:3:r?4:1,t;N=se(n)?r?1:4:r?3:2}return t.minus(i).abs()}function me(e,t,n,r){var i,s,o,c,u,a,l,f,h,p=e.constructor,d=void 0!==n;if(d?(X(n,1,D),void 0===r?r=p.rounding:X(r,0,8)):(n=p.precision,r=p.rounding),e.isFinite()){for(d?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(l=Q(e)).indexOf("."))>=0&&(l=l.replace(".",""),(h=new p(1)).e=l.length-o,h.d=J(Q(h),10,i),h.e=h.d.length),s=u=(f=J(l,10,i)).length;0==f[--u];)f.pop();if(f[0]){if(o<0?s--:((e=new p(e)).d=f,e.e=s,f=(e=W(e,h,n,r,0,i)).d,s=e.e,a=v),o=f[n],c=i/2,a=a||void 0!==f[n+1],a=r<4?(void 0!==o||a)&&(0===r||r===(e.s<0?3:2)):o>c||o===c&&(4===r||a||6===r&&1&f[n-1]||r===(e.s<0?8:7)),f.length=n,a)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,l="";o<u;o++)l+=C.charAt(f[o]);if(d){if(u>1)if(16==t||8==t){for(o=16==t?4:3,--u;u%o;u++)l+="0";for(u=(f=J(l,i,t)).length;!f[u-1];--u);for(o=1,l="1.";o<u;o++)l+=C.charAt(f[o])}else l=l.charAt(0)+"."+l.slice(1);l=l+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)l="0"+l;l="0."+l}else if(++s>u)for(s-=u;s--;)l+="0";else s<u&&(l=l.slice(0,s)+"."+l.slice(s))}else l=d?"0p+0":"0";l=(16==t?"0x":2==t?"0b":8==t?"0o":"")+l}else l=ae(e);return e.s<0?"-"+l:l}function ge(e,t){if(e.length>t)return e.length=t,!0}function we(e){return new this(e).abs()}function be(e){return new this(e).acos()}function ve(e){return new this(e).acosh()}function Ne(e,t){return new this(e).plus(t)}function Pe(e){return new this(e).asin()}function ye(e){return new this(e).asinh()}function je(e){return new this(e).atan()}function xe(e){return new this(e).atanh()}function De(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?te(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=te(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan(W(e,t,s,1)),t=te(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(W(e,t,s,1)):(n=te(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function Ce(e){return new this(e).cbrt()}function Ee(e){return G(e=new this(e),e.e+1,2)}function Oe(e,t,n){return new this(e).clamp(t,n)}function qe(e){if(!e||"object"!=typeof e)throw Error(M+"Object expected");var t,n,r,i=!0===e.defaults,s=["precision",1,D,"rounding",0,8,"toExpNeg",-x,0,"toExpPos",0,x,"maxE",0,x,"minE",-x,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=q[n]),void 0!==(r=e[n])){if(!(I(r)===r&&r>=s[t+1]&&r<=s[t+2]))throw Error(R+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=q[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(R+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(U);this[n]=!0}else this[n]=!1}return this}function Te(e){return new this(e).cos()}function Me(e){return new this(e).cosh()}function Re(e,t){return new this(e).div(t)}function _e(e){return new this(e).exp()}function Ue(e){return G(e=new this(e),e.e+1,3)}function Le(){var e,t,n=new this(0);for(T=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return T=!0,new this(1/0);n=t}return T=!0,n.sqrt()}function Ie(e){return e instanceof rt||e&&e.toStringTag===L||!1}function Fe(e){return new this(e).ln()}function Se(e,t){return new this(e).log(t)}function ke(e){return new this(e).log(2)}function Ae(e){return new this(e).log(10)}function Ze(){return oe(this,arguments,-1)}function Be(){return oe(this,arguments,1)}function $e(e,t){return new this(e).mod(t)}function He(e,t){return new this(e).mul(t)}function Ke(e,t){return new this(e).pow(t)}function Ve(e){var t,n,r,i,s=0,o=new this(1),c=[];if(void 0===e?e=this.precision:X(e,1,D),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:c[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(U);for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(c.push(i%1e7),s+=4);s=r/4}else for(;s<r;)c[s++]=1e7*Math.random()|0;for(e%=7,(r=c[--s])&&e&&(i=F(10,7-e),c[s]=(r/i|0)*i);0===c[s];s--)c.pop();if(s<0)n=0,c=[0];else{for(n=-1;0===c[0];n-=7)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=c,o}function Xe(e){return G(e=new this(e),e.e+1,this.rounding)}function ze(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Je(e){return new this(e).sin()}function We(e){return new this(e).sinh()}function Ge(e){return new this(e).sqrt()}function Qe(e,t){return new this(e).sub(t)}function Ye(){var e=0,t=arguments,n=new this(t[e]);for(T=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return T=!0,G(n,this.precision,this.rounding)}function et(e){return new this(e).tan()}function tt(e){return new this(e).tanh()}function nt(e){return G(e=new this(e),e.e+1,1)}K[Symbol.for("nodejs.util.inspect.custom")]=K.toString,K[Symbol.toStringTag]="Decimal";var rt=K.constructor=function e(t){var n,r,i;function s(e){var t,n,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,Ie(e))return i.s=e.s,void(T?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(T?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):le(i,e.toString())}if("string"===r)return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),Z.test(e)?le(i,e):fe(i,e);if("bigint"===r)return e<0?(e=-e,i.s=-1):i.s=1,le(i,e.toString());throw Error(R+e)}if(s.prototype=K,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=qe,s.clone=e,s.isDecimal=Ie,s.abs=we,s.acos=be,s.acosh=ve,s.add=Ne,s.asin=Pe,s.asinh=ye,s.atan=je,s.atanh=xe,s.atan2=De,s.cbrt=Ce,s.ceil=Ee,s.clamp=Oe,s.cos=Te,s.cosh=Me,s.div=Re,s.exp=_e,s.floor=Ue,s.hypot=Le,s.ln=Fe,s.log=Se,s.log10=Ae,s.log2=ke,s.max=Ze,s.min=Be,s.mod=$e,s.mul=He,s.pow=Ke,s.random=Ve,s.round=Xe,s.sign=ze,s.sin=Je,s.sinh=We,s.sqrt=Ge,s.sub=Qe,s.sum=Ye,s.tan=et,s.tanh=tt,s.trunc=nt,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(q);E=new rt(E),O=new rt(O);var it={keepParamsMaxPrecision:!0,outputDecimalPlaces:-1,taxRate:.1,rateType:"INCL"};i(it);var st={precision:16,rounding:rt.ROUND_HALF_UP,toExpNeg:-7,toExpPos:21,maxE:9e15,minE:-9e15,modulo:1,crypto:!1};i(st);var ot=["all","sum","subtractMultiple","calcUnitPrice","calcLinePrice","percentToDecimal","decimalToPercent","calculateDiscountedPrice","computeRate"],ct=function(){function e(){this.calcCache={sum:new s,subtractMultiple:new s,calcUnitPrice:new s,calcLinePrice:new s,percentToDecimal:new s,decimalToPercent:new s,calculateDiscountedPrice:new s,computeRate:new s},this.userOptions=b({},it),this.calcConfigs=b({},st)}return e.prototype.resetInstance=function(){this.clearCache(),this.userOptions=b({},it),this.calcConfigs=b({},st)},e.prototype.setUserOption=function(e,t){switch(e){case"keepParamsMaxPrecision":if("boolean"!=typeof t)throw new Error("参数 keepParamsMaxPrecision 应该为 Boolean 值");this.userOptions.keepParamsMaxPrecision=t;break;case"outputDecimalPlaces":if("number"!=typeof t||t>16||t<0&&-1!==t)throw new Error("参数 outputDecimalPlaces 应该为 [0, 16] 间的数字，或者 -1 表示不进行四舍五入直接返回原始值");this.userOptions.outputDecimalPlaces=t;break;case"taxRate":if("number"!=typeof t||t<0||t>1)throw new Error("参数 taxRate 应该为 [0, 1] 间的数字");this.userOptions.taxRate=t;break;case"rateType":var n=["EXCL","INCL","FREE"];if(!o(n).call(n,t))throw new Error("请传入正确的 RateType 类型，应该为 'EXCL', 'INCL', 'FREE' 之一");this.userOptions.rateType=t;break;default:throw new Error("配置项错误 ".concat(e," , 请检查后重试"))}},e.prototype._getCalcConfigs=function(){return this.calcConfigs},e.prototype._getUserOptions=function(){return this.userOptions},e.prototype.getThisDataMaxPrecision=function(e){var n,r=this._getUserOptions(),i=r.keepParamsMaxPrecision?-1:r.outputDecimalPlaces;return c(e)?Math.max.apply(Math,u(e).call(e,function(e){return j(e)})):"object"===t(e)&&null!==e?Math.max.apply(Math,u(n=a(e)).call(n,function(e){return j(e)})):"number"==typeof e&&e%1!=0?j(e):i},e.prototype.getCache=function(e){return null==e?this.calcCache:o(ot).call(ot,e)?this.calcCache[e]:(console.warn("Invalid cacheType: ".concat(e)),this.calcCache)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.clearCache=function(e){if(void 0===e&&(e="all"),!e)throw new Error("cacheType is required");"all"!==e&&"sum"!==e||this.calcCache.sum.clear(),"all"!==e&&"subtractMultiple"!==e||this.calcCache.subtractMultiple.clear(),"all"!==e&&"calcUnitPrice"!==e||this.calcCache.calcUnitPrice.clear(),"all"!==e&&"calcLinePrice"!==e||this.calcCache.calcLinePrice.clear(),"all"!==e&&"percentToDecimal"!==e||this.calcCache.percentToDecimal.clear(),"all"!==e&&"decimalToPercent"!==e||this.calcCache.decimalToPercent.clear(),"all"!==e&&"calculateDiscountedPrice"!==e||this.calcCache.calculateDiscountedPrice.clear(),"all"!==e&&"computeRate"!==e||this.calcCache.computeRate.clear(),o(ot).call(ot,e)||console.warn("Invalid cacheType: ".concat(e))},e.prototype.queryCacheStat=function(e){void 0===e&&(e="all");var t={sum:this.calcCache.sum,subtractMultiple:this.calcCache.subtractMultiple,calcUnitPrice:this.calcCache.calcUnitPrice,calcLinePrice:this.calcCache.calcLinePrice,percentToDecimal:this.calcCache.percentToDecimal,decimalToPercent:this.calcCache.decimalToPercent,calculateDiscountedPrice:this.calcCache.calculateDiscountedPrice,computeRate:this.calcCache.computeRate},n={all:0,sum:0,subtractMultiple:0,calcUnitPrice:0,calcLinePrice:0,percentToDecimal:0,decimalToPercent:0,calculateDiscountedPrice:0,computeRate:0},r="all"===e?l(t):[e];return f(r).call(r,function(e){t[e]&&(n[e]=t[e].size,n.all+=t[e].size)}),n},e.prototype.generateCacheKey=function(e){var t=function(e){var n;if(null==e)return h(e);if(!y(e))return h(e);if(c(e))return"[".concat(u(e).call(e,t).join(","),"]");var r=p(n=l(e)).call(n),i=u(r).call(r,function(n){var r;return d(r="".concat(h(n),":")).call(r,t(e[n]))});return"{".concat(i.join(","),"}")};return t(e)},e.prototype.sum=function(e,t){var n,r=this,i=b({},this._getUserOptions());null!==i&&y(t)&&l(t).length>0&&f(n=m(t)).call(n,function(e){var t=e[0],n=e[1];t in r.userOptions&&(i[t]=n)});var s=rt.clone(b({},st)),o=this.generateCacheKey({data:e,mergedOptions:i});if(this.calcCache.sum.has(o))return this.calcCache.sum.get(o);var u=0,h=[];if(c(e))h=g(e).call(e,function(e){return P(e)&&!w(e)});else if(y(e)){var p;h=g(p=a(e)).call(p,function(e){return P(e)&&!w(e)})}else P(e)&&(h=[e]);if(h.length>0){for(var d=new s(0),v=0,N=h;v<N.length;v++){var j=N[v];d=d.add(new s(j))}var x=-1===i.outputDecimalPlaces?-1:i.outputDecimalPlaces;u=-1===x?d.toNumber():d.toDP(x).toNumber()}return this.calcCache.sum.set(o,u),u},e.prototype.subtractMultiple=function(e,t,n){var r,i=b({},this._getUserOptions());null!==i&&y(n)&&l(n).length>0&&f(r=m(n)).call(r,function(e){var t=e[0],n=e[1];t in i&&(i[t]=n)});var s=rt.clone(b({},st)),o=this.generateCacheKey({initialValue:e,subtractValues:t,mergedOptions:i});P(e)&&!w(e)||(e=0),c(t)||(t=[t]);var u=g(t).call(t,function(e){return P(e)});if(this.calcCache.subtractMultiple.has(o))return this.calcCache.subtractMultiple.get(o);for(var a=new s(e),h=0,p=u;h<p.length;h++){var d=p[h];a=a.minus(new s(d))}var v=-1===i.outputDecimalPlaces?-1:i.outputDecimalPlaces,N=-1===v?a.toNumber():a.toDP(v).toNumber();return this.calcCache.subtractMultiple.set(o,N),N},e.prototype.calcUnitPrice=function(e,t){var n=this,r=e.quantity,i=e.linePrice;if(null===r&&null===i)return{quantity:null,unitPrice:null,linePrice:null};if(null===r)return{quantity:r,unitPrice:i,linePrice:i};if(null===i)return{quantity:r,unitPrice:null,linePrice:null};if(0===r)return{quantity:0,unitPrice:i,linePrice:i};var s,o=b({},this._getUserOptions());null!==o&&y(t)&&l(t).length>0&&f(s=m(t)).call(s,function(e){var t=e[0],r=e[1];t in n.userOptions&&(o[t]=r)});var c=rt.clone(b({},st)),u=this.generateCacheKey({calcBaseTotalParams:e,mergedOptions:o});if(this.calcCache.calcUnitPrice.has(u))return this.calcCache.calcUnitPrice.get(u);var a=new c(r),h=new c(i).dividedBy(a),p=-1===o.outputDecimalPlaces?-1:o.outputDecimalPlaces,d={quantity:r,unitPrice:-1===p?h.toNumber():h.toDP(p).toNumber(),linePrice:i};return this.calcCache.calcUnitPrice.set(u,d),d},e.prototype.calcLinePrice=function(e,t){var n=this,r=e.quantity,i=e.unitPrice;if(P(r)&&!w(r)||(r=null),P(i)&&!w(i)||(i=null),P(r)&&r<=0&&(console.warn("参数错误, quantity 必须大于等于 0。这里按 0 处理来处理"),r=0),null===r&&P(i)&&i>=0)return{quantity:r,unitPrice:i,linePrice:i};if(P(r)&&r>=0&&null===i)return{quantity:r,unitPrice:null,linePrice:null};if(null===r&&null===i)return{quantity:r,unitPrice:null,linePrice:null};var s,o=b({},this._getUserOptions());null!==o&&y(t)&&l(t).length>0&&f(s=m(t)).call(s,function(e){var t=e[0],r=e[1];t in n.userOptions&&(o[t]=r)});var c=rt.clone(b({},st)),u=this.generateCacheKey({calcBaseTotalParams:e,mergedOptions:o});if(this.calcCache.calcLinePrice.has(u))return this.calcCache.calcLinePrice.get(u);var a=new c(r||0),h=new c(i||0),p=a.mul(h),d=-1===o.outputDecimalPlaces?-1:o.outputDecimalPlaces,g={quantity:r,unitPrice:i,linePrice:-1===d?p.toNumber():p.toDP(d).toNumber()};return this.calcCache.calcLinePrice.set(u,g),g},e.prototype.calculateDiscountedPrice=function(e,t,n){var r=this;if(null===e||null===t||!P(e)||w(e)||!P(t)||w(t))return null;if(P(e)&&e<0)return console.error("参数 originalPrice 应该为大于 0 的数值"),e;if(0===t)return e;if(1===t)return 0;if(P(t)&&t<0)return console.error("请确保传参 discountRate(折扣率) 在 [0, 1] 之间。 若确认传入是百分比，你可以先使用 percentToDecimal 方法将百分比转换为小数再进行计算。"),e;var i,s=b({},this._getUserOptions());null!==s&&y(n)&&l(n).length>0&&f(i=m(n)).call(i,function(e){var t=e[0],n=e[1];t in r.userOptions&&(s[t]=n)});var o=rt.clone(b({},st)),c=this.generateCacheKey({originalPrice:e,discountRate:t,mergedOptions:s});if(this.calcCache.calculateDiscountedPrice.has(c))return this.calcCache.calculateDiscountedPrice.get(c);var u=new o(e),a=-1===s.outputDecimalPlaces?-1:s.outputDecimalPlaces,h=u.mul(t),p=-1===a?u.sub(h).toNumber():u.sub(h).toDP(a).toNumber();return this.calcCache.calculateDiscountedPrice.set(c,p),p},e.prototype.percentToDecimal=function(e,t){var n,r,i=b({},this._getUserOptions());if(void 0===t)t=i;else if(y(t)||P(t)){if(P(t)){t={outputDecimalPlaces:w(t)?t:-1}}}else t=i;y(t)&&f(r=m(t)).call(r,function(e){var t=e[0],n=e[1];i[t]=n});if(null===e||!P(e)||w(e))return null;var s=rt.clone(b({},st)),o=this.generateCacheKey({originPercentage:e,curUserOptions:i});if(null===(n=this.calcCache.percentToDecimal)||void 0===n?void 0:n.has(o))return this.calcCache.percentToDecimal.get(o);var c=new s(e),u=new s(100),a=c.dividedBy(u),l=-1===i.outputDecimalPlaces?-1:i.outputDecimalPlaces,h=-1===l?a.toNumber():a.toDP(l).toNumber();return this.calcCache.percentToDecimal.set(o,h),h},e.prototype.decimalToPercent=function(e,t){var n,r=b({},this._getUserOptions());if(void 0===t)t=r;else if(y(t)||P(t)){if(P(t)){t={outputDecimalPlaces:t>-1?t:-1}}}else console.error("非法参数 userOptions, 请传入正确的参数，第二个参数应该为 0 - 10位 Number 类型, 非法参数按预设处理"),t=r;y(t)&&f(n=m(t)).call(n,function(e){var t=e[0],n=e[1];r[t]=n});if(null===e||0===e||!P(e)||w(e))return 0;if(!P(null==t?void 0:t.outputDecimalPlaces)||w(null==t?void 0:t.outputDecimalPlaces))return console.error("参数错误，请检查传参: \n1. originNumber 应该为 Number 类型；\n2. 第二个参数保留小数位数 应为 0 到 10 之间的数字"),e;t.outputDecimalPlaces>10&&(console.error("参数错误，请检查传参: 第二个参数保留小数位数应为 0 到 10 之间的数字, 当前大于 10 当作 10 来处理"),t.outputDecimalPlaces=10);var i=this.generateCacheKey({originNumber:e,userOptions:t}),s=this.getCache("decimalToPercent");if(s.has(i))return s.get(i);var o=-1===t.outputDecimalPlaces?-1:t.outputDecimalPlaces,c=rt.clone(b({},st))(e).mul(100),u=-1===o?c.toNumber():c.toDP(t.outputDecimalPlaces).toNumber();return this.calcCache.decimalToPercent.set(i,u),u},e.prototype.computeRate=function(e,t,n){var r,i=g(r=[e,t,n]).call(r,function(e){return void 0!==e}),s=b({},this._getUserOptions());s.rateType;var o,c={},u=s.taxRate;if(null===e||0===e||!P(e)||w(e))return 0;if(1===i.length&&P(i[0]))u=s.taxRate,s.rateType,c=b({},s);else if(2===i.length&&P(t))u=t,s.rateType,c=b(b({},s),{rateType:s.rateType,taxRate:t});else if(2===i.length&&y(t))void 0!==t.taxRate&&(u=t.taxRate),void 0!==t.rateType&&t.rateType,c=b(b({},s),t);else{if(!(2!==i.length||P(t)&&y(t)))return console.error("param2 传参异常。请参考API文档传入正确的配置项"),e;3===i.length&&P(t)&&"string"==typeof n&&(u=t,c=b(b({},s),{taxRate:t,rateType:n}))}y(c)&&f(o=m(c)).call(o,function(e){var t=e[0],n=e[1];s[t]=n});var a=-1===c.outputDecimalPlaces?-1:c.outputDecimalPlaces;if(null===u||w(u)||"number"!=typeof u)return console.warn("参数 Rate 无效，直接返回原始价格"),e;u<0&&(console.warn("参数 Rate 应大于0。当前参数错误, 使用默认税率 ".concat(s.taxRate)),u=s.taxRate);var l=this.generateCacheKey({originPrice:e,userOptions:c,finalDigitNumber:a});if(this.calcCache.computeRate.has(l))return this.calcCache.computeRate.get(l);var h=rt.clone(b({},st)),p=h(1).add(c.taxRate).toNumber(),d={FREE:function(){return h(0)},INCL:function(e){return h(e).div(p).mul(c.taxRate)},EXCL:function(e){return h(e).mul(c.taxRate)}}[c.rateType];if(!d)return console.error("参数 ".concat(c.rateType," 类型错误")),e;var v=-1===a?d(e).toNumber():d(e).toDP(a).toNumber();return this.calcCache.computeRate.set(l,v),v},e}(),ut=ct.getInstance();e.CalcInst=ut,e.default=ct,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map

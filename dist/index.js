"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime-corejs3/helpers/typeof");require("core-js/modules/es.array.join.js"),require("core-js/modules/es.string.sub.js");var t=require("@babel/runtime-corejs3/core-js-stable/object/seal"),n=require("@babel/runtime-corejs3/core-js-stable/map"),r=require("@babel/runtime-corejs3/core-js-stable/instance/includes"),i=require("@babel/runtime-corejs3/core-js-stable/array/is-array"),s=require("@babel/runtime-corejs3/core-js-stable/instance/map"),o=require("@babel/runtime-corejs3/core-js-stable/object/values"),c=require("@babel/runtime-corejs3/core-js-stable/object/keys"),u=require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),a=require("@babel/runtime-corejs3/core-js-stable/json/stringify"),l=require("@babel/runtime-corejs3/core-js-stable/instance/sort"),f=require("@babel/runtime-corejs3/core-js-stable/instance/concat"),h=require("@babel/runtime-corejs3/core-js-stable/object/entries"),p=require("@babel/runtime-corejs3/core-js-stable/instance/filter"),d=require("@babel/runtime-corejs3/core-js-stable/number/is-nan");require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.regexp.to-string.js");var m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var g,w,v=function(e){try{return Number(e)===e}catch(e){return!1}},b=function(e){return!!e&&e.constructor===Object},N=function(e){var t,n,i=Number(e).toString();if(r(i).call(i,"e-"))return Number(null===(t=i.split("e-"))||void 0===t?void 0:t[1]);var s=(null===(n=null==e?void 0:e.toString().split(".")[1])||void 0===n?void 0:n.length)||0;return s<=2?2:s},P=9e15,y=1e9,D="0123456789abcdef",x="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",C="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",E={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-P,maxE:P,crypto:!1},O=!0,q="[DecimalError] ",T=q+"Invalid argument: ",M=q+"Precision limit exceeded",j=q+"crypto unavailable",R="[object Decimal]",U=Math.floor,L=Math.pow,_=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,F=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,k=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,A=1e7,I=x.length-1,Z=C.length-1,B={toStringTag:R};function H(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=ee(n)),s+=r;(n=7-(r=(o=e[t])+"").length)&&(s+=ee(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function K(e,t,n){if(e!==~~e||e<t||e>n)throw Error(T+e)}function V(e,t,n,r){var i,s,o,c;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=L(10,7-t),c=e[i]%s|0,null==r?t<3?(0==t?c=c/100|0:1==t&&(c=c/10|0),o=n<4&&99999==c||n>3&&49999==c||5e4==c||0==c):o=(n<4&&c+1==s||n>3&&c+1==s/2)&&(e[i+1]/s/100|0)==L(10,t-2)-1||(c==s/2||0==c)&&!(e[i+1]/s/100|0):t<4?(0==t?c=c/1e3|0:1==t?c=c/100|0:2==t&&(c=c/10|0),o=(r||n<4)&&9999==c||!r&&n>3&&4999==c):o=((r||n<4)&&c+1==s||!r&&n>3&&c+1==s/2)&&(e[i+1]/s/1e3|0)==L(10,t-3)-1,o}function $(e,t,n){for(var r,i,s=[0],o=0,c=e.length;o<c;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=D.indexOf(e.charAt(o++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}B.absoluteValue=B.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),z(e)},B.ceil=function(){return z(new this.constructor(this),this.e+1,2)},B.clampedTo=B.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(T+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},B.comparedTo=B.cmp=function(e){var t,n,r,i,s=this,o=s.d,c=(e=new s.constructor(e)).d,u=s.s,a=e.s;if(!o||!c)return u&&a?u!==a?u:o===c?0:!o^u<0?1:-1:NaN;if(!o[0]||!c[0])return o[0]?u:c[0]?-a:0;if(u!==a)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(t=0,n=(r=o.length)<(i=c.length)?r:i;t<n;++t)if(o[t]!==c[t])return o[t]>c[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},B.cosine=B.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?i=(1/le(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");e.precision+=n,t=ae(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,fe(r,n)),r.precision=e,r.rounding=t,z(2==w||3==w?n.neg():n,e,t,!0)):new r(1):new r(NaN)},B.cubeRoot=B.cbrt=function(){var e,t,n,r,i,s,o,c,u,a,l=this,f=l.constructor;if(!l.isFinite()||l.isZero())return new f(l);for(O=!1,(s=l.s*L(l.s*l,1/3))&&Math.abs(s)!=1/0?r=new f(s.toString()):(n=H(l.d),(s=((e=l.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=L(n,1/3),e=U((e+1)/3)-(e%3==(e<0?-1:2)),(r=new f(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=l.s),o=(e=f.precision)+3;;)if(a=(u=(c=r).times(c).times(c)).plus(l),r=X(a.plus(l).times(c),a.plus(u),o+2,1),H(c.d).slice(0,o)===(n=H(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(z(r,e+1,1),t=!r.times(r).times(r).eq(l));break}if(!i&&(z(c,e+1,0),c.times(c).times(c).eq(l))){r=c;break}o+=4,i=1}return O=!0,z(r,e,f.rounding,t)},B.decimalPlaces=B.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-U(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},B.dividedBy=B.div=function(e){return X(this,new this.constructor(e))},B.dividedToIntegerBy=B.divToInt=function(e){var t=this.constructor;return z(X(this,new t(e),0,1,1),t.precision,t.rounding)},B.equals=B.eq=function(e){return 0===this.cmp(e)},B.floor=function(){return z(new this.constructor(this),this.e+1,3)},B.greaterThan=B.gt=function(e){return this.cmp(e)>0},B.greaterThanOrEqualTo=B.gte=function(e){var t=this.cmp(e);return 1==t||0===t},B.hyperbolicCosine=B.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,c=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return c;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,(i=s.d.length)<32?t=(1/le(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=ae(o,1,s.times(t),new o(1),!0);for(var u,a=e,l=new o(8);a--;)u=s.times(s),s=c.minus(u.times(l.minus(u.times(l))));return z(s,o.precision=n,o.rounding=r,!0)},B.hyperbolicSine=B.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=ae(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=ae(s,2,i=i.times(1/le(5,e)),i,!0);for(var o,c=new s(5),u=new s(16),a=new s(20);e--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(a))))}return s.precision=t,s.rounding=n,z(i,t,n,!0)},B.hyperbolicTangent=B.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,X(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},B.inverseCosine=B.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,i=t.rounding;return-1!==n?0===n?e.isNeg()?Q(t,r,i):new t(0):new t(NaN):e.isZero()?Q(t,r+4,i).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=i,e.times(2))},B.inverseHyperbolicCosine=B.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,O=!1,n=n.times(n).minus(1).sqrt().plus(n),O=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},B.inverseHyperbolicSine=B.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,O=!1,n=n.times(n).plus(1).sqrt().plus(n),O=!0,r.precision=e,r.rounding=t,n.ln())},B.inverseHyperbolicTangent=B.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?z(new s(i),e,t,!0):(s.precision=n=r-i.e,i=X(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},B.inverseSine=B.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=Q(s,n+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))},B.inverseTangent=B.atan=function(){var e,t,n,r,i,s,o,c,u,a=this,l=a.constructor,f=l.precision,h=l.rounding;if(a.isFinite()){if(a.isZero())return new l(a);if(a.abs().eq(1)&&f+4<=Z)return(o=Q(l,f+4,h).times(.25)).s=a.s,o}else{if(!a.s)return new l(NaN);if(f+4<=Z)return(o=Q(l,f+4,h).times(.5)).s=a.s,o}for(l.precision=c=f+10,l.rounding=1,e=n=Math.min(28,c/7+2|0);e;--e)a=a.div(a.times(a).plus(1).sqrt().plus(1));for(O=!1,t=Math.ceil(c/7),r=1,u=a.times(a),o=new l(a),i=a;-1!==e;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),void 0!==(o=s.plus(i.div(r+=2))).d[t])for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),O=!0,z(o,l.precision=f,l.rounding=h,!0)},B.isFinite=function(){return!!this.d},B.isInteger=B.isInt=function(){return!!this.d&&U(this.e/7)>this.d.length-2},B.isNaN=function(){return!this.s},B.isNegative=B.isNeg=function(){return this.s<0},B.isPositive=B.isPos=function(){return this.s>0},B.isZero=function(){return!!this.d&&0===this.d[0]},B.lessThan=B.lt=function(e){return this.cmp(e)<0},B.lessThanOrEqualTo=B.lte=function(e){return this.cmp(e)<1},B.logarithm=B.log=function(e){var t,n,r,i,s,o,c,u,a=this,l=a.constructor,f=l.precision,h=l.rounding;if(null==e)e=new l(10),t=!0;else{if(n=(e=new l(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=a.d,a.s<0||!n||!n[0]||a.eq(1))return new l(n&&!n[0]?-1/0:1!=a.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10==0;)i/=10;s=1!==i}if(O=!1,o=se(a,c=f+5),r=t?G(l,c+10):se(e,c),V((u=X(o,r,c,1)).d,i=f,h))do{if(o=se(a,c+=10),r=t?G(l,c+10):se(e,c),u=X(o,r,c,1),!s){+H(u.d).slice(i+1,i+15)+1==1e14&&(u=z(u,f+1,0));break}}while(V(u.d,i+=10,h));return O=!0,z(u,f,h)},B.minus=B.sub=function(e){var t,n,r,i,s,o,c,u,a,l,f,h,p=this,d=p.constructor;if(e=new d(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new d(e.d||p.s!==e.s?p:NaN):e=new d(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(a=p.d,h=e.d,c=d.precision,u=d.rounding,!a[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!a[0])return new d(3===u?-0:0);e=new d(p)}return O?z(e,c,u):e}if(n=U(e.e/7),l=U(p.e/7),a=a.slice(),s=l-n){for((f=s<0)?(t=a,s=-s,o=h.length):(t=h,n=l,o=a.length),s>(r=Math.max(Math.ceil(c/7),o)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((f=(r=a.length)<(o=h.length))&&(o=r),r=0;r<o;r++)if(a[r]!=h[r]){f=a[r]<h[r];break}s=0}for(f&&(t=a,a=h,h=t,e.s=-e.s),o=a.length,r=h.length-o;r>0;--r)a[o++]=0;for(r=h.length;r>s;){if(a[--r]<h[r]){for(i=r;i&&0===a[--i];)a[i]=A-1;--a[i],a[r]+=A}a[r]-=h[r]}for(;0===a[--o];)a.pop();for(;0===a[0];a.shift())--n;return a[0]?(e.d=a,e.e=J(a,n),O?z(e,c,u):e):new d(3===u?-0:0)},B.modulo=B.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?z(new r(n),r.precision,r.rounding):(O=!1,9==r.modulo?(t=X(n,e.abs(),0,3,1)).s*=e.s:t=X(n,e,0,r.modulo,1),t=t.times(e),O=!0,n.minus(t))},B.naturalExponential=B.exp=function(){return ie(this)},B.naturalLogarithm=B.ln=function(){return se(this)},B.negated=B.neg=function(){var e=new this.constructor(this);return e.s=-e.s,z(e)},B.plus=B.add=function(e){var t,n,r,i,s,o,c,u,a,l,f=this,h=f.constructor;if(e=new h(e),!f.d||!e.d)return f.s&&e.s?f.d||(e=new h(e.d||f.s===e.s?f:NaN)):e=new h(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(a=f.d,l=e.d,c=h.precision,u=h.rounding,!a[0]||!l[0])return l[0]||(e=new h(f)),O?z(e,c,u):e;if(s=U(f.e/7),r=U(e.e/7),a=a.slice(),i=s-r){for(i<0?(n=a,i=-i,o=l.length):(n=l,r=s,o=a.length),i>(o=(s=Math.ceil(c/7))>o?s+1:o+1)&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((o=a.length)-(i=l.length)<0&&(i=o,n=l,l=a,a=n),t=0;i;)t=(a[--i]=a[i]+l[i]+t)/A|0,a[i]%=A;for(t&&(a.unshift(t),++r),o=a.length;0==a[--o];)a.pop();return e.d=a,e.e=J(a,r),O?z(e,c,u):e},B.precision=B.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(T+e);return n.d?(t=Y(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},B.round=function(){var e=this,t=e.constructor;return z(new t(e),e.e+1,t.rounding)},B.sine=B.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:ae(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/le(5,n)),t=ae(e,2,t,t);for(var i,s=new e(5),o=new e(16),c=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(c))));return t}(r,fe(r,n)),r.precision=e,r.rounding=t,z(w>2?n.neg():n,e,t,!0)):new r(NaN)},B.squareRoot=B.sqrt=function(){var e,t,n,r,i,s,o=this,c=o.d,u=o.e,a=o.s,l=o.constructor;if(1!==a||!c||!c[0])return new l(!a||a<0&&(!c||c[0])?NaN:c?o:1/0);for(O=!1,0==(a=Math.sqrt(+o))||a==1/0?(((t=H(c)).length+u)%2==0&&(t+="0"),a=Math.sqrt(t),u=U((u+1)/2)-(u<0||u%2),r=new l(t=a==1/0?"5e"+u:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new l(a.toString()),n=(u=l.precision)+3;;)if(r=(s=r).plus(X(o,s,n+2,1)).times(.5),H(s.d).slice(0,n)===(t=H(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(z(r,u+1,1),e=!r.times(r).eq(o));break}if(!i&&(z(s,u+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}return O=!0,z(r,u,l.rounding,e)},B.tangent=B.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=X(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,z(2==w||4==w?n.neg():n,e,t,!0)):new r(NaN)},B.times=B.mul=function(e){var t,n,r,i,s,o,c,u,a,l=this,f=l.constructor,h=l.d,p=(e=new f(e)).d;if(e.s*=l.s,!(h&&h[0]&&p&&p[0]))return new f(!e.s||h&&!h[0]&&!p||p&&!p[0]&&!h?NaN:h&&p?0*e.s:e.s/0);for(n=U(l.e/7)+U(e.e/7),(u=h.length)<(a=p.length)&&(s=h,h=p,p=s,o=u,u=a,a=o),s=[],r=o=u+a;r--;)s.push(0);for(r=a;--r>=0;){for(t=0,i=u+r;i>r;)c=s[i]+p[r]*h[i-r-1]+t,s[i--]=c%A|0,t=c/A|0;s[i]=(s[i]+t)%A|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=J(s,n),O?z(e,f.precision,f.rounding):e},B.toBinary=function(e,t){return he(this,2,e,t)},B.toDecimalPlaces=B.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(K(e,0,y),void 0===t?t=r.rounding:K(t,0,8),z(n,e+n.e+1,t))},B.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=W(r,!0):(K(e,0,y),void 0===t?t=i.rounding:K(t,0,8),n=W(r=z(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},B.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=W(i):(K(e,0,y),void 0===t?t=s.rounding:K(t,0,8),n=W(r=z(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},B.toFraction=function(e){var t,n,r,i,s,o,c,u,a,l,f,h,p=this,d=p.d,m=p.constructor;if(!d)return new m(p);if(a=n=new m(1),r=u=new m(0),o=(s=(t=new m(r)).e=Y(d)-p.e-1)%7,t.d[0]=L(10,o<0?7+o:o),null==e)e=s>0?t:a;else{if(!(c=new m(e)).isInt()||c.lt(a))throw Error(T+c);e=c.gt(t)?s>0?t:a:c}for(O=!1,c=new m(H(d)),l=m.precision,m.precision=s=7*d.length*2;f=X(c,t,0,1,1),1!=(i=n.plus(f.times(r))).cmp(e);)n=r,r=i,i=a,a=u.plus(f.times(i)),u=i,i=t,t=c.minus(f.times(i)),c=i;return i=X(e.minus(n),r,0,1,1),u=u.plus(i.times(a)),n=n.plus(i.times(r)),u.s=a.s=p.s,h=X(a,r,s,1).minus(p).abs().cmp(X(u,n,s,1).minus(p).abs())<1?[a,r]:[u,n],m.precision=l,O=!0,h},B.toHexadecimal=B.toHex=function(e,t){return he(this,16,e,t)},B.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:K(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(O=!1,n=X(n,e,0,t,1).times(e),O=!0,z(n)):(e.s=n.s,n=e),n},B.toNumber=function(){return+this},B.toOctal=function(e,t){return he(this,8,e,t)},B.toPower=B.pow=function(e){var t,n,r,i,s,o,c=this,u=c.constructor,a=+(e=new u(e));if(!(c.d&&e.d&&c.d[0]&&e.d[0]))return new u(L(+c,a));if((c=new u(c)).eq(1))return c;if(r=u.precision,s=u.rounding,e.eq(1))return z(c,r,s);if((t=U(e.e/7))>=e.d.length-1&&(n=a<0?-a:a)<=9007199254740991)return i=te(u,c,n,r),e.s<0?new u(1).div(i):z(i,r,s);if((o=c.s)<0){if(t<e.d.length-1)return new u(NaN);if(1&e.d[t]||(o=1),0==c.e&&1==c.d[0]&&1==c.d.length)return c.s=o,c}return(t=0!=(n=L(+c,a))&&isFinite(n)?new u(n+"").e:U(a*(Math.log("0."+H(c.d))/Math.LN10+c.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(O=!1,u.rounding=c.s=1,n=Math.min(12,(t+"").length),(i=ie(e.times(se(c,r+n)),r)).d&&V((i=z(i,r+5,1)).d,r,s)&&(t=r+10,+H((i=z(ie(e.times(se(c,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=z(i,r+1,0))),i.s=o,O=!0,u.rounding=s,z(i,r,s))},B.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=W(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(K(e,1,y),void 0===t?t=i.rounding:K(t,0,8),n=W(r=z(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},B.toSignificantDigits=B.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(K(e,1,y),void 0===t?t=n.rounding:K(t,0,8)),z(new n(this),e,t)},B.toString=function(){var e=this,t=e.constructor,n=W(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},B.truncated=B.trunc=function(){return z(new this.constructor(this),this.e+1,1)},B.valueOf=B.toJSON=function(){var e=this,t=e.constructor,n=W(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var X=function(){function e(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+i,e[s]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,s,o,c,u){var a,l,f,h,p,d,m,w,v,b,N,P,y,D,x,C,E,O,q,T,M=r.constructor,j=r.s==i.s?1:-1,R=r.d,L=i.d;if(!(R&&R[0]&&L&&L[0]))return new M(r.s&&i.s&&(R?!L||R[0]!=L[0]:L)?R&&0==R[0]||!L?0*j:j/0:NaN);for(u?(p=1,l=r.e-i.e):(u=A,p=7,l=U(r.e/p)-U(i.e/p)),q=L.length,E=R.length,b=(v=new M(j)).d=[],f=0;L[f]==(R[f]||0);f++);if(L[f]>(R[f]||0)&&l--,null==s?(D=s=M.precision,o=M.rounding):D=c?s+(r.e-i.e)+1:s,D<0)b.push(1),d=!0;else{if(D=D/p+2|0,f=0,1==q){for(h=0,L=L[0],D++;(f<E||h)&&D--;f++)x=h*u+(R[f]||0),b[f]=x/L|0,h=x%L|0;d=h||f<E}else{for((h=u/(L[0]+1)|0)>1&&(L=e(L,h,u),R=e(R,h,u),q=L.length,E=R.length),C=q,P=(N=R.slice(0,q)).length;P<q;)N[P++]=0;(T=L.slice()).unshift(0),O=L[0],L[1]>=u/2&&++O;do{h=0,(a=t(L,N,q,P))<0?(y=N[0],q!=P&&(y=y*u+(N[1]||0)),(h=y/O|0)>1?(h>=u&&(h=u-1),1==(a=t(m=e(L,h,u),N,w=m.length,P=N.length))&&(h--,n(m,q<w?T:L,w,u))):(0==h&&(a=h=1),m=L.slice()),(w=m.length)<P&&m.unshift(0),n(N,m,P,u),-1==a&&(a=t(L,N,q,P=N.length))<1&&(h++,n(N,q<P?T:L,P,u)),P=N.length):0===a&&(h++,N=[0]),b[f++]=h,a&&N[0]?N[P++]=R[C]||0:(N=[R[C]],P=1)}while((C++<E||void 0!==N[0])&&D--);d=void 0!==N[0]}b[0]||b.shift()}if(1==p)v.e=l,g=d;else{for(f=1,h=b[0];h>=10;h/=10)f++;v.e=f+l*p-1,z(v,c?s+v.e+1:s,o,d)}return v}}();function z(e,t,n,r){var i,s,o,c,u,a,l,f,h,p=e.constructor;e:if(null!=t){if(!(f=e.d))return e;for(i=1,c=f[0];c>=10;c/=10)i++;if((s=t-i)<0)s+=7,o=t,u=(l=f[h=0])/L(10,i-o-1)%10|0;else if((h=Math.ceil((s+1)/7))>=(c=f.length)){if(!r)break e;for(;c++<=h;)f.push(0);l=u=0,i=1,o=(s%=7)-7+1}else{for(l=c=f[h],i=1;c>=10;c/=10)i++;u=(o=(s%=7)-7+i)<0?0:l/L(10,i-o-1)%10|0}if(r=r||t<0||void 0!==f[h+1]||(o<0?l:l%L(10,i-o-1)),a=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(s>0?o>0?l/L(10,i-o):0:f[h-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,a?(t-=e.e+1,f[0]=L(10,(7-t%7)%7),e.e=-t||0):f[0]=e.e=0,e;if(0==s?(f.length=h,c=1,h--):(f.length=h+1,c=L(10,7-s),f[h]=o>0?(l/L(10,i-o)%L(10,o)|0)*c:0),a)for(;;){if(0==h){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=c,c=1;o>=10;o/=10)c++;s!=c&&(e.e++,f[0]==A&&(f[0]=1));break}if(f[h]+=c,f[h]!=A)break;f[h--]=0,c=1}for(s=f.length;0===f[--s];)f.pop()}return O&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function W(e,t,n){if(!e.isFinite())return oe(e);var r,i=e.e,s=H(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+ee(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+ee(-i-1)+s,n&&(r=n-o)>0&&(s+=ee(r))):i>=o?(s+=ee(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+ee(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=ee(r))),s}function J(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function G(e,t,n){if(t>I)throw O=!0,n&&(e.precision=n),Error(M);return z(new e(x),t,1,!0)}function Q(e,t,n){if(t>Z)throw Error(M);return z(new e(C),t,n,!0)}function Y(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function ee(e){for(var t="";e--;)t+="0";return t}function te(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/7+4);for(O=!1;;){if(n%2&&pe((s=s.times(t)).d,o)&&(i=!0),0===(n=U(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}pe((t=t.times(t)).d,o)}return O=!0,s}function ne(e){return 1&e.d[e.d.length-1]}function re(e,t,n){for(var r,i,s=new e(t[0]),o=0;++o<t.length;){if(!(i=new e(t[o])).s){s=i;break}((r=s.cmp(i))===n||0===r&&s.s===n)&&(s=i)}return s}function ie(e,t){var n,r,i,s,o,c,u,a=0,l=0,f=0,h=e.constructor,p=h.rounding,d=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(O=!1,u=d):u=t,c=new h(.03125);e.e>-2;)e=e.times(c),f+=5;for(u+=r=Math.log(L(2,f))/Math.LN10*2+5|0,n=s=o=new h(1),h.precision=u;;){if(s=z(s.times(e),u,1),n=n.times(++l),H((c=o.plus(X(s,n,u,1))).d).slice(0,u)===H(o.d).slice(0,u)){for(i=f;i--;)o=z(o.times(o),u,1);if(null!=t)return h.precision=d,o;if(!(a<3&&V(o.d,u-r,p,a)))return z(o,h.precision=d,p,O=!0);h.precision=u+=10,n=s=c=new h(1),l=0,a++}o=c}}function se(e,t){var n,r,i,s,o,c,u,a,l,f,h,p=1,d=e,m=d.d,g=d.constructor,w=g.rounding,v=g.precision;if(d.s<0||!m||!m[0]||!d.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=d.s?NaN:m?0:d);if(null==t?(O=!1,l=v):l=t,g.precision=l+=10,r=(n=H(m)).charAt(0),!(Math.abs(s=d.e)<15e14))return a=G(g,l+2,v).times(s+""),d=se(new g(r+"."+n.slice(1)),l-10).plus(a),g.precision=v,null==t?z(d,v,w,O=!0):d;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=H((d=d.times(e)).d)).charAt(0),p++;for(s=d.e,r>1?(d=new g("0."+n),s++):d=new g(r+"."+n.slice(1)),f=d,u=o=d=X(d.minus(1),d.plus(1),l,1),h=z(d.times(d),l,1),i=3;;){if(o=z(o.times(h),l,1),H((a=u.plus(X(o,new g(i),l,1))).d).slice(0,l)===H(u.d).slice(0,l)){if(u=u.times(2),0!==s&&(u=u.plus(G(g,l+2,v).times(s+""))),u=X(u,new g(p),l,1),null!=t)return g.precision=v,u;if(!V(u.d,l-10,w,c))return z(u,g.precision=v,w,O=!0);g.precision=l+=10,a=o=d=X(f.minus(1),f.plus(1),l,1),h=z(d.times(d),l,1),i=c=1}u=a,i+=2}}function oe(e){return String(e.s*e.s/0)}function ce(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),O&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function ue(e,t){var n,r,i,s,o,c,u,a,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),k.test(t))return ce(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(F.test(t))n=16,t=t.toLowerCase();else if(_.test(t))n=2;else{if(!S.test(t))throw Error(T+t);n=8}for((s=t.search(/p/i))>0?(u=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),o=(s=t.indexOf("."))>=0,r=e.constructor,o&&(s=(c=(t=t.replace(".","")).length)-s,i=te(r,new r(n),s,2*s)),s=l=(a=$(t,n,A)).length-1;0===a[s];--s)a.pop();return s<0?new r(0*e.s):(e.e=J(a,l),e.d=a,O=!1,o&&(e=X(e,i,4*c)),u&&(e=e.times(Math.abs(u)<54?L(2,u):et.pow(2,u))),O=!0,e)}function ae(e,t,n,r,i){var s,o,c,u,a=e.precision,l=Math.ceil(a/7);for(O=!1,u=n.times(n),c=new e(r);;){if(o=X(c.times(u),new e(t++*t++),a,1),c=i?r.plus(o):r.minus(o),r=X(o.times(u),new e(t++*t++),a,1),void 0!==(o=c.plus(r)).d[l]){for(s=l;o.d[s]===c.d[s]&&s--;);if(-1==s)break}s=c,c=r,r=o,o=s}return O=!0,o.d.length=l+1,o}function le(e,t){for(var n=e;--t;)n*=e;return n}function fe(e,t){var n,r=t.s<0,i=Q(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return w=r?4:1,t;if((n=t.divToInt(i)).isZero())w=r?3:2;else{if((t=t.minus(n.times(i))).lte(s))return w=ne(n)?r?2:3:r?4:1,t;w=ne(n)?r?1:4:r?3:2}return t.minus(i).abs()}function he(e,t,n,r){var i,s,o,c,u,a,l,f,h,p=e.constructor,d=void 0!==n;if(d?(K(n,1,y),void 0===r?r=p.rounding:K(r,0,8)):(n=p.precision,r=p.rounding),e.isFinite()){for(d?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(l=W(e)).indexOf("."))>=0&&(l=l.replace(".",""),(h=new p(1)).e=l.length-o,h.d=$(W(h),10,i),h.e=h.d.length),s=u=(f=$(l,10,i)).length;0==f[--u];)f.pop();if(f[0]){if(o<0?s--:((e=new p(e)).d=f,e.e=s,f=(e=X(e,h,n,r,0,i)).d,s=e.e,a=g),o=f[n],c=i/2,a=a||void 0!==f[n+1],a=r<4?(void 0!==o||a)&&(0===r||r===(e.s<0?3:2)):o>c||o===c&&(4===r||a||6===r&&1&f[n-1]||r===(e.s<0?8:7)),f.length=n,a)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,l="";o<u;o++)l+=D.charAt(f[o]);if(d){if(u>1)if(16==t||8==t){for(o=16==t?4:3,--u;u%o;u++)l+="0";for(u=(f=$(l,i,t)).length;!f[u-1];--u);for(o=1,l="1.";o<u;o++)l+=D.charAt(f[o])}else l=l.charAt(0)+"."+l.slice(1);l=l+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)l="0"+l;l="0."+l}else if(++s>u)for(s-=u;s--;)l+="0";else s<u&&(l=l.slice(0,s)+"."+l.slice(s))}else l=d?"0p+0":"0";l=(16==t?"0x":2==t?"0b":8==t?"0o":"")+l}else l=oe(e);return e.s<0?"-"+l:l}function pe(e,t){if(e.length>t)return e.length=t,!0}function de(e){return new this(e).abs()}function me(e){return new this(e).acos()}function ge(e){return new this(e).acosh()}function we(e,t){return new this(e).plus(t)}function ve(e){return new this(e).asin()}function be(e){return new this(e).asinh()}function Ne(e){return new this(e).atan()}function Pe(e){return new this(e).atanh()}function ye(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?Q(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=Q(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan(X(e,t,s,1)),t=Q(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(X(e,t,s,1)):(n=Q(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function De(e){return new this(e).cbrt()}function xe(e){return z(e=new this(e),e.e+1,2)}function Ce(e,t,n){return new this(e).clamp(t,n)}function Ee(e){if(!e||"object"!=typeof e)throw Error(q+"Object expected");var t,n,r,i=!0===e.defaults,s=["precision",1,y,"rounding",0,8,"toExpNeg",-P,0,"toExpPos",0,P,"maxE",0,P,"minE",-P,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=E[n]),void 0!==(r=e[n])){if(!(U(r)===r&&r>=s[t+1]&&r<=s[t+2]))throw Error(T+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=E[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(T+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(j);this[n]=!0}else this[n]=!1}return this}function Oe(e){return new this(e).cos()}function qe(e){return new this(e).cosh()}function Te(e,t){return new this(e).div(t)}function Me(e){return new this(e).exp()}function je(e){return z(e=new this(e),e.e+1,3)}function Re(){var e,t,n=new this(0);for(O=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return O=!0,new this(1/0);n=t}return O=!0,n.sqrt()}function Ue(e){return e instanceof et||e&&e.toStringTag===R||!1}function Le(e){return new this(e).ln()}function _e(e,t){return new this(e).log(t)}function Fe(e){return new this(e).log(2)}function Se(e){return new this(e).log(10)}function ke(){return re(this,arguments,-1)}function Ae(){return re(this,arguments,1)}function Ie(e,t){return new this(e).mod(t)}function Ze(e,t){return new this(e).mul(t)}function Be(e,t){return new this(e).pow(t)}function He(e){var t,n,r,i,s=0,o=new this(1),c=[];if(void 0===e?e=this.precision:K(e,1,y),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:c[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(j);for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(c.push(i%1e7),s+=4);s=r/4}else for(;s<r;)c[s++]=1e7*Math.random()|0;for(e%=7,(r=c[--s])&&e&&(i=L(10,7-e),c[s]=(r/i|0)*i);0===c[s];s--)c.pop();if(s<0)n=0,c=[0];else{for(n=-1;0===c[0];n-=7)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=c,o}function Ke(e){return z(e=new this(e),e.e+1,this.rounding)}function Ve(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function $e(e){return new this(e).sin()}function Xe(e){return new this(e).sinh()}function ze(e){return new this(e).sqrt()}function We(e,t){return new this(e).sub(t)}function Je(){var e=0,t=arguments,n=new this(t[e]);for(O=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return O=!0,z(n,this.precision,this.rounding)}function Ge(e){return new this(e).tan()}function Qe(e){return new this(e).tanh()}function Ye(e){return z(e=new this(e),e.e+1,1)}B[Symbol.for("nodejs.util.inspect.custom")]=B.toString,B[Symbol.toStringTag]="Decimal";var et=B.constructor=function e(t){var n,r,i;function s(e){var t,n,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,Ue(e))return i.s=e.s,void(O?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(O?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):ce(i,e.toString())}if("string"===r)return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),k.test(e)?ce(i,e):ue(i,e);if("bigint"===r)return e<0?(e=-e,i.s=-1):i.s=1,ce(i,e.toString());throw Error(T+e)}if(s.prototype=B,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Ee,s.clone=e,s.isDecimal=Ue,s.abs=de,s.acos=me,s.acosh=ge,s.add=we,s.asin=ve,s.asinh=be,s.atan=Ne,s.atanh=Pe,s.atan2=ye,s.cbrt=De,s.ceil=xe,s.clamp=Ce,s.cos=Oe,s.cosh=qe,s.div=Te,s.exp=Me,s.floor=je,s.hypot=Re,s.ln=Le,s.log=_e,s.log10=Se,s.log2=Fe,s.max=ke,s.min=Ae,s.mod=Ie,s.mul=Ze,s.pow=Be,s.random=He,s.round=Ke,s.sign=Ve,s.sin=$e,s.sinh=Xe,s.sqrt=ze,s.sub=We,s.sum=Je,s.tan=Ge,s.tanh=Qe,s.trunc=Ye,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(E);x=new et(x),C=new et(C);var tt={keepParamsMaxPrecision:!0,outputDecimalPlaces:-1,taxRate:.1,rateType:"INCL"};t(tt);var nt={precision:16,rounding:et.ROUND_HALF_UP,toExpNeg:-7,toExpPos:21,maxE:9e15,minE:-9e15,modulo:1,crypto:!1};t(nt);var rt=["all","sum","subtractMultiple","calcUnitPrice","calcLinePrice","percentToDecimal","decimalToPercent","calculateDiscountedPrice","computeRate"],it=function(){function t(){this.calcCache={sum:new n,subtractMultiple:new n,calcUnitPrice:new n,calcLinePrice:new n,percentToDecimal:new n,decimalToPercent:new n,calculateDiscountedPrice:new n,computeRate:new n},this.userOptions=m({},tt),this.calcConfigs=m({},nt)}return t.prototype.resetInstance=function(){this.clearCache(),this.userOptions=m({},tt),this.calcConfigs=m({},nt)},t.prototype.setUserOption=function(e,t){switch(e){case"keepParamsMaxPrecision":if("boolean"!=typeof t)throw new Error("参数 keepParamsMaxPrecision 应该为 Boolean 值");this.userOptions.keepParamsMaxPrecision=t;break;case"outputDecimalPlaces":if("number"!=typeof t||t>16||t<0&&-1!==t)throw new Error("参数 outputDecimalPlaces 应该为 [0, 16] 间的数字，或者 -1 表示不进行四舍五入直接返回原始值");this.userOptions.outputDecimalPlaces=t;break;case"taxRate":if("number"!=typeof t||t<0||t>1)throw new Error("参数 taxRate 应该为 [0, 1] 间的数字");this.userOptions.taxRate=t;break;case"rateType":var n=["EXCL","INCL","FREE"];if(!r(n).call(n,t))throw new Error("请传入正确的 RateType 类型，应该为 'EXCL', 'INCL', 'FREE' 之一");this.userOptions.rateType=t;break;default:throw new Error("配置项错误 ".concat(e," , 请检查后重试"))}},t.prototype._getCalcConfigs=function(){return this.calcConfigs},t.prototype._getUserOptions=function(){return this.userOptions},t.prototype.getThisDataMaxPrecision=function(t){var n,r=this._getUserOptions(),c=r.keepParamsMaxPrecision?-1:r.outputDecimalPlaces;return i(t)?Math.max.apply(Math,s(t).call(t,function(e){return N(e)})):"object"===e(t)&&null!==t?Math.max.apply(Math,s(n=o(t)).call(n,function(e){return N(e)})):"number"==typeof t&&t%1!=0?N(t):c},t.prototype.getCache=function(e){return null==e?this.calcCache:r(rt).call(rt,e)?this.calcCache[e]:(console.warn("Invalid cacheType: ".concat(e)),this.calcCache)},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.clearCache=function(e){if(void 0===e&&(e="all"),!e)throw new Error("cacheType is required");"all"!==e&&"sum"!==e||this.calcCache.sum.clear(),"all"!==e&&"subtractMultiple"!==e||this.calcCache.subtractMultiple.clear(),"all"!==e&&"calcUnitPrice"!==e||this.calcCache.calcUnitPrice.clear(),"all"!==e&&"calcLinePrice"!==e||this.calcCache.calcLinePrice.clear(),"all"!==e&&"percentToDecimal"!==e||this.calcCache.percentToDecimal.clear(),"all"!==e&&"decimalToPercent"!==e||this.calcCache.decimalToPercent.clear(),"all"!==e&&"calculateDiscountedPrice"!==e||this.calcCache.calculateDiscountedPrice.clear(),"all"!==e&&"computeRate"!==e||this.calcCache.computeRate.clear(),r(rt).call(rt,e)||console.warn("Invalid cacheType: ".concat(e))},t.prototype.queryCacheStat=function(e){void 0===e&&(e="all");var t={sum:this.calcCache.sum,subtractMultiple:this.calcCache.subtractMultiple,calcUnitPrice:this.calcCache.calcUnitPrice,calcLinePrice:this.calcCache.calcLinePrice,percentToDecimal:this.calcCache.percentToDecimal,decimalToPercent:this.calcCache.decimalToPercent,calculateDiscountedPrice:this.calcCache.calculateDiscountedPrice,computeRate:this.calcCache.computeRate},n={all:0,sum:0,subtractMultiple:0,calcUnitPrice:0,calcLinePrice:0,percentToDecimal:0,decimalToPercent:0,calculateDiscountedPrice:0,computeRate:0},r="all"===e?c(t):[e];return u(r).call(r,function(e){t[e]&&(n[e]=t[e].size,n.all+=t[e].size)}),n},t.prototype.generateCacheKey=function(e){var t=function(e){var n;if(null==e)return a(e);if(!b(e))return a(e);if(i(e))return"[".concat(s(e).call(e,t).join(","),"]");var r=l(n=c(e)).call(n),o=s(r).call(r,function(n){var r;return f(r="".concat(a(n),":")).call(r,t(e[n]))});return"{".concat(o.join(","),"}")};return t(e)},t.prototype.sum=function(e,t){var n,r=this,s=m({},this._getUserOptions());null!==s&&b(t)&&c(t).length>0&&u(n=h(t)).call(n,function(e){var t=e[0],n=e[1];t in r.userOptions&&(s[t]=n)});var a=et.clone(m({},nt)),l=this.generateCacheKey({data:e,mergedOptions:s});if(this.calcCache.sum.has(l))return this.calcCache.sum.get(l);var f=0,g=[];if(i(e))g=p(e).call(e,function(e){return v(e)&&!d(e)});else if(b(e)){var w;g=p(w=o(e)).call(w,function(e){return v(e)&&!d(e)})}else v(e)&&(g=[e]);if(g.length>0){for(var N=new a(0),P=0,y=g;P<y.length;P++){var D=y[P];N=N.add(new a(D))}var x=-1===s.outputDecimalPlaces?-1:s.outputDecimalPlaces;f=-1===x?N.toNumber():N.toDP(x).toNumber()}return this.calcCache.sum.set(l,f),f},t.prototype.subtractMultiple=function(e,t,n){var r,s=m({},this._getUserOptions());null!==s&&b(n)&&c(n).length>0&&u(r=h(n)).call(r,function(e){var t=e[0],n=e[1];t in s&&(s[t]=n)});var o=et.clone(m({},nt)),a=this.generateCacheKey({initialValue:e,subtractValues:t,mergedOptions:s});v(e)&&!d(e)||(e=0),i(t)||(t=[t]);var l=p(t).call(t,function(e){return v(e)});if(this.calcCache.subtractMultiple.has(a))return this.calcCache.subtractMultiple.get(a);for(var f=new o(e),g=0,w=l;g<w.length;g++){var N=w[g];f=f.minus(new o(N))}var P=-1===s.outputDecimalPlaces?-1:s.outputDecimalPlaces,y=-1===P?f.toNumber():f.toDP(P).toNumber();return this.calcCache.subtractMultiple.set(a,y),y},t.prototype.calcUnitPrice=function(e,t){var n=this,r=e.quantity,i=e.linePrice;if(null===r&&null===i)return{quantity:null,unitPrice:null,linePrice:null};if(null===r)return{quantity:r,unitPrice:i,linePrice:i};if(null===i)return{quantity:r,unitPrice:null,linePrice:null};if(0===r)return{quantity:0,unitPrice:i,linePrice:i};var s,o=m({},this._getUserOptions());null!==o&&b(t)&&c(t).length>0&&u(s=h(t)).call(s,function(e){var t=e[0],r=e[1];t in n.userOptions&&(o[t]=r)});var a=et.clone(m({},nt)),l=this.generateCacheKey({calcBaseTotalParams:e,mergedOptions:o});if(this.calcCache.calcUnitPrice.has(l))return this.calcCache.calcUnitPrice.get(l);var f=new a(r),p=new a(i).dividedBy(f),d=-1===o.outputDecimalPlaces?-1:o.outputDecimalPlaces,g={quantity:r,unitPrice:-1===d?p.toNumber():p.toDP(d).toNumber(),linePrice:i};return this.calcCache.calcUnitPrice.set(l,g),g},t.prototype.calcLinePrice=function(e,t){var n=this,r=e.quantity,i=e.unitPrice;if(v(r)&&!d(r)||(r=null),v(i)&&!d(i)||(i=null),v(r)&&r<=0&&(console.warn("参数错误, quantity 必须大于等于 0。这里按 0 处理来处理"),r=0),null===r&&v(i)&&i>=0)return{quantity:r,unitPrice:i,linePrice:i};if(v(r)&&r>=0&&null===i)return{quantity:r,unitPrice:null,linePrice:null};if(null===r&&null===i)return{quantity:r,unitPrice:null,linePrice:null};var s,o=m({},this._getUserOptions());null!==o&&b(t)&&c(t).length>0&&u(s=h(t)).call(s,function(e){var t=e[0],r=e[1];t in n.userOptions&&(o[t]=r)});var a=et.clone(m({},nt)),l=this.generateCacheKey({calcBaseTotalParams:e,mergedOptions:o});if(this.calcCache.calcLinePrice.has(l))return this.calcCache.calcLinePrice.get(l);var f=new a(r||0),p=new a(i||0),g=f.mul(p),w=-1===o.outputDecimalPlaces?-1:o.outputDecimalPlaces,N={quantity:r,unitPrice:i,linePrice:-1===w?g.toNumber():g.toDP(w).toNumber()};return this.calcCache.calcLinePrice.set(l,N),N},t.prototype.calculateDiscountedPrice=function(e,t,n){var r=this;if(null===e||null===t||!v(e)||d(e)||!v(t)||d(t))return null;if(v(e)&&e<0)return console.error("参数 originalPrice 应该为大于 0 的数值"),e;if(0===t)return e;if(1===t)return 0;if(v(t)&&t<0)return console.error("请确保传参 discountRate(折扣率) 在 [0, 1] 之间。 若确认传入是百分比，你可以先使用 percentToDecimal 方法将百分比转换为小数再进行计算。"),e;var i,s=m({},this._getUserOptions());null!==s&&b(n)&&c(n).length>0&&u(i=h(n)).call(i,function(e){var t=e[0],n=e[1];t in r.userOptions&&(s[t]=n)});var o=et.clone(m({},nt)),a=this.generateCacheKey({originalPrice:e,discountRate:t,mergedOptions:s});if(this.calcCache.calculateDiscountedPrice.has(a))return this.calcCache.calculateDiscountedPrice.get(a);var l=new o(e),f=-1===s.outputDecimalPlaces?-1:s.outputDecimalPlaces,p=l.mul(t),g=-1===f?l.sub(p).toNumber():l.sub(p).toDP(f).toNumber();return this.calcCache.calculateDiscountedPrice.set(a,g),g},t.prototype.percentToDecimal=function(e,t){var n,r,i=m({},this._getUserOptions());if(void 0===t)t=i;else if(b(t)||v(t)){if(v(t)){t={outputDecimalPlaces:d(t)?t:-1}}}else t=i;b(t)&&u(r=h(t)).call(r,function(e){var t=e[0],n=e[1];i[t]=n});if(null===e||!v(e)||d(e))return null;var s=et.clone(m({},nt)),o=this.generateCacheKey({originPercentage:e,curUserOptions:i});if(null===(n=this.calcCache.percentToDecimal)||void 0===n?void 0:n.has(o))return this.calcCache.percentToDecimal.get(o);var c=new s(e),a=new s(100),l=c.dividedBy(a),f=-1===i.outputDecimalPlaces?-1:i.outputDecimalPlaces,p=-1===f?l.toNumber():l.toDP(f).toNumber();return this.calcCache.percentToDecimal.set(o,p),p},t.prototype.decimalToPercent=function(e,t){var n,r=m({},this._getUserOptions());if(void 0===t)t=r;else if(b(t)||v(t)){if(v(t)){t={outputDecimalPlaces:t>-1?t:-1}}}else console.error("非法参数 userOptions, 请传入正确的参数，第二个参数应该为 0 - 10位 Number 类型, 非法参数按预设处理"),t=r;b(t)&&u(n=h(t)).call(n,function(e){var t=e[0],n=e[1];r[t]=n});if(null===e||0===e||!v(e)||d(e))return 0;if(!v(null==t?void 0:t.outputDecimalPlaces)||d(null==t?void 0:t.outputDecimalPlaces))return console.error("参数错误，请检查传参: \n1. originNumber 应该为 Number 类型；\n2. 第二个参数保留小数位数 应为 0 到 10 之间的数字"),e;t.outputDecimalPlaces>10&&(console.error("参数错误，请检查传参: 第二个参数保留小数位数应为 0 到 10 之间的数字, 当前大于 10 当作 10 来处理"),t.outputDecimalPlaces=10);var i=this.generateCacheKey({originNumber:e,userOptions:t}),s=this.getCache("decimalToPercent");if(s.has(i))return s.get(i);var o=-1===t.outputDecimalPlaces?-1:t.outputDecimalPlaces,c=et.clone(m({},nt))(e).mul(100),a=-1===o?c.toNumber():c.toDP(t.outputDecimalPlaces).toNumber();return this.calcCache.decimalToPercent.set(i,a),a},t.prototype.computeRate=function(e,t,n){var r,i=p(r=[e,t,n]).call(r,function(e){return void 0!==e}),s=m({},this._getUserOptions());s.rateType;var o,c={},a=s.taxRate;if(null===e||0===e||!v(e)||d(e))return 0;if(1===i.length&&v(i[0]))a=s.taxRate,s.rateType,c=m({},s);else if(2===i.length&&v(t))a=t,s.rateType,c=m(m({},s),{rateType:s.rateType,taxRate:t});else if(2===i.length&&b(t))void 0!==t.taxRate&&(a=t.taxRate),void 0!==t.rateType&&t.rateType,c=m(m({},s),t);else{if(!(2!==i.length||v(t)&&b(t)))return console.error("param2 传参异常。请参考API文档传入正确的配置项"),e;3===i.length&&v(t)&&"string"==typeof n&&(a=t,c=m(m({},s),{taxRate:t,rateType:n}))}b(c)&&u(o=h(c)).call(o,function(e){var t=e[0],n=e[1];s[t]=n});var l=-1===c.outputDecimalPlaces?-1:c.outputDecimalPlaces;if(null===a||d(a)||"number"!=typeof a)return console.warn("参数 Rate 无效，直接返回原始价格"),e;a<0&&(console.warn("参数 Rate 应大于0。当前参数错误, 使用默认税率 ".concat(s.taxRate)),a=s.taxRate);var f=this.generateCacheKey({originPrice:e,userOptions:c,finalDigitNumber:l});if(this.calcCache.computeRate.has(f))return this.calcCache.computeRate.get(f);var g=et.clone(m({},nt)),w=g(1).add(c.taxRate).toNumber(),N={FREE:function(){return g(0)},INCL:function(e){return g(e).div(w).mul(c.taxRate)},EXCL:function(e){return g(e).mul(c.taxRate)}}[c.rateType];if(!N)return console.error("参数 ".concat(c.rateType," 类型错误")),e;var P=-1===l?N(e).toNumber():N(e).toDP(l).toNumber();return this.calcCache.computeRate.set(f,P),P},t}(),st=it.getInstance();exports.CalcInst=st,exports.default=it;
